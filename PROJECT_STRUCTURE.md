# é¡¹ç›®ç›®å½•ç»“æ„è¯´æ˜

## ğŸ“ å½“å‰ç›®å½•ç»“æ„

```
ai-note-card/
â”œâ”€â”€ app/                          # Next.js App Router æ ¸å¿ƒç›®å½•
â”‚   â”œâ”€â”€ layout.tsx               # æ ¹å¸ƒå±€ç»„ä»¶ï¼ˆæ‰€æœ‰é¡µé¢å…±äº«ï¼‰
â”‚   â”œâ”€â”€ page.tsx                 # é¦–é¡µç»„ä»¶ï¼ˆè·¯ç”±ï¼š/ï¼‰
â”‚   â”œâ”€â”€ actions.ts               # Server Actionsï¼ˆæœåŠ¡å™¨ç«¯å‡½æ•°ï¼‰
â”‚   â”œâ”€â”€ globals.css              # å…¨å±€æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ favicon.ico              # ç½‘ç«™å›¾æ ‡
â”‚
â”œâ”€â”€ lib/                          # å·¥å…·åº“å’Œå…±äº«ä»£ç 
â”‚   â””â”€â”€ schemas.ts               # Zod Schema å®šä¹‰ï¼ˆæ•°æ®éªŒè¯ï¼‰
â”‚
â”œâ”€â”€ public/                       # é™æ€èµ„æºç›®å½•
â”‚   â””â”€â”€ *.svg                    # SVG å›¾æ ‡æ–‡ä»¶
â”‚
â”œâ”€â”€ .env.local                   # ç¯å¢ƒå˜é‡ï¼ˆä¸æäº¤åˆ° Gitï¼‰
â”œâ”€â”€ next.config.ts               # Next.js é…ç½®æ–‡ä»¶
â”œâ”€â”€ tsconfig.json                # TypeScript é…ç½®
â”œâ”€â”€ package.json                  # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ”„ Next.js è°ƒåº¦æœºåˆ¶

### 1. æ–‡ä»¶ç³»ç»Ÿè·¯ç”±ï¼ˆFile System Routingï¼‰

Next.js æ ¹æ® `app` ç›®å½•ä¸‹çš„æ–‡ä»¶è‡ªåŠ¨åˆ›å»ºè·¯ç”±ï¼š

| æ–‡ä»¶è·¯å¾„ | å¯¹åº”è·¯ç”± | è¯´æ˜ |
|---------|---------|------|
| `app/page.tsx` | `/` | é¦–é¡µ |
| `app/about/page.tsx` | `/about` | å…³äºé¡µé¢ |
| `app/blog/[id]/page.tsx` | `/blog/123` | åŠ¨æ€è·¯ç”± |

### 2. ç‰¹æ®Šæ–‡ä»¶çº¦å®š

Next.js è¯†åˆ«ä»¥ä¸‹ç‰¹æ®Šæ–‡ä»¶åï¼š

| æ–‡ä»¶å | ä½œç”¨ | è¯´æ˜ |
|--------|------|------|
| `layout.tsx` | å¸ƒå±€ç»„ä»¶ | åŒ…è£¹å­é¡µé¢ï¼Œå¯åµŒå¥— |
| `page.tsx` | é¡µé¢ç»„ä»¶ | å®é™…æ¸²æŸ“çš„é¡µé¢å†…å®¹ |
| `loading.tsx` | åŠ è½½ç»„ä»¶ | æ˜¾ç¤ºåŠ è½½çŠ¶æ€ |
| `error.tsx` | é”™è¯¯ç»„ä»¶ | æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ |
| `not-found.tsx` | 404 é¡µé¢ | é¡µé¢æœªæ‰¾åˆ°æ—¶æ˜¾ç¤º |

### 3. Server Actions è¯†åˆ«

- æ–‡ä»¶åŒ…å« `"use server"` æŒ‡ä»¤
- æˆ–æ–‡ä»¶æ‰©å±•åä¸º `.server.ts` / `.server.tsx`
- Next.js è‡ªåŠ¨å°†è¿™äº›å‡½æ•°æš´éœ²ä¸ºå¯è°ƒç”¨çš„ Server Actions

## ğŸ“Š è¯·æ±‚å¤„ç†æµç¨‹

### é¡µé¢è¯·æ±‚æµç¨‹

```
1. ç”¨æˆ·è®¿é—® http://localhost:3000/
   â†“
2. Next.js æ¥æ”¶ HTTP è¯·æ±‚
   â†“
3. æŸ¥æ‰¾è·¯ç”±ï¼šapp/page.tsx
   â†“
4. åŠ è½½å¸ƒå±€ï¼šapp/layout.tsx
   â†“
5. æ‰§è¡Œ Server Componentsï¼ˆå¦‚æœæœ‰ï¼‰
   â†“
6. æ¸²æŸ“é¡µé¢ï¼šapp/page.tsx
   â†“
7. è¿”å› HTML ç»™æµè§ˆå™¨
```

### Server Action è°ƒç”¨æµç¨‹

```
1. å‰ç«¯è°ƒç”¨ï¼šawait generateCardContent(inputText)
   â†“
2. Next.js æ£€æµ‹åˆ° Server Action
   â†“
3. è‡ªåŠ¨åˆ›å»ºå†…éƒ¨ API ç«¯ç‚¹
   â†“
4. å‘é€ HTTP POST è¯·æ±‚åˆ°æœåŠ¡å™¨
   â†“
5. æœåŠ¡å™¨æ‰§è¡Œ app/actions.ts ä¸­çš„å‡½æ•°
   â†“
6. è¿”å›ç»“æœç»™å‰ç«¯
   â†“
7. å‰ç«¯æ›´æ–°çŠ¶æ€å¹¶é‡æ–°æ¸²æŸ“
```

## ğŸ¯ æ–‡ä»¶èŒè´£è¯´æ˜

### app/layout.tsx
- **ä½œç”¨**ï¼šæ ¹å¸ƒå±€ï¼ŒåŒ…è£¹æ‰€æœ‰é¡µé¢
- **ç‰¹ç‚¹**ï¼šæ‰€æœ‰é¡µé¢éƒ½ä¼šä½¿ç”¨è¿™ä¸ªå¸ƒå±€
- **å†…å®¹**ï¼šHTML ç»“æ„ã€å­—ä½“é…ç½®ã€å…¨å±€æ ·å¼å¼•å…¥

### app/page.tsx
- **ä½œç”¨**ï¼šé¦–é¡µç»„ä»¶
- **ç‰¹ç‚¹**ï¼š`"use client"` è¡¨ç¤ºå®¢æˆ·ç«¯ç»„ä»¶
- **å†…å®¹**ï¼šç”¨æˆ·ç•Œé¢ã€çŠ¶æ€ç®¡ç†ã€äº‹ä»¶å¤„ç†

### app/actions.ts
- **ä½œç”¨**ï¼šServer Actionsï¼ˆæœåŠ¡å™¨ç«¯å‡½æ•°ï¼‰
- **ç‰¹ç‚¹**ï¼š`"use server"` è¡¨ç¤ºæœåŠ¡å™¨ç«¯æ‰§è¡Œ
- **å†…å®¹**ï¼šAPI è°ƒç”¨ã€æ•°æ®å¤„ç†ã€ä¸šåŠ¡é€»è¾‘

### lib/schemas.ts
- **ä½œç”¨**ï¼šæ•°æ®éªŒè¯ Schema
- **ç‰¹ç‚¹**ï¼šä½¿ç”¨ Zod å®šä¹‰æ•°æ®ç»“æ„
- **å†…å®¹**ï¼šCard ç±»å‹å®šä¹‰ã€éªŒè¯è§„åˆ™

## ğŸ” Next.js å¦‚ä½•è¯†åˆ«æ–‡ä»¶

### 1. è·¯ç”±è¯†åˆ«
- `app/` ç›®å½•ä¸‹çš„ `page.tsx` è‡ªåŠ¨æˆä¸ºè·¯ç”±
- æ–‡ä»¶å¤¹å = è·¯ç”±è·¯å¾„
- `page.tsx` = é¡µé¢å†…å®¹

### 2. Server Actions è¯†åˆ«
- æ–‡ä»¶åŒ…å« `"use server"` æŒ‡ä»¤
- å¯¼å‡ºçš„ async å‡½æ•°è‡ªåŠ¨æˆä¸º Server Action
- å‰ç«¯å¯ä»¥ç›´æ¥è°ƒç”¨ï¼ˆNext.js è‡ªåŠ¨å¤„ç†ç½‘ç»œè¯·æ±‚ï¼‰

### 3. ç»„ä»¶è¯†åˆ«
- `.tsx` / `.jsx` æ–‡ä»¶ = React ç»„ä»¶
- `"use client"` = å®¢æˆ·ç«¯ç»„ä»¶ï¼ˆåœ¨æµè§ˆå™¨è¿è¡Œï¼‰
- æ— æŒ‡ä»¤ = Server Componentï¼ˆåœ¨æœåŠ¡å™¨è¿è¡Œï¼‰

## ğŸ’¡ æœ€ä½³å®è·µ

### ç›®å½•ç»„ç»‡å»ºè®®

```
app/
â”œâ”€â”€ (routes)/              # è·¯ç”±ç»„ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ page.tsx          # é¦–é¡µ
â”‚   â””â”€â”€ about/
â”‚       â””â”€â”€ page.tsx      # å…³äºé¡µé¢
â”œâ”€â”€ api/                  # API è·¯ç”±ï¼ˆå¦‚æœéœ€è¦ï¼‰
â”‚   â””â”€â”€ route.ts
â”œâ”€â”€ components/           # å…±äº«ç»„ä»¶ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ Card.tsx
â”œâ”€â”€ actions/              # Server Actionsï¼ˆå¯é€‰ï¼Œæ›´æ¸…æ™°ï¼‰
â”‚   â””â”€â”€ card.ts
â””â”€â”€ layout.tsx            # æ ¹å¸ƒå±€

lib/
â”œâ”€â”€ schemas/              # Schema å®šä¹‰ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ card.ts
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ helpers.ts
â””â”€â”€ types/                # TypeScript ç±»å‹ï¼ˆå¯é€‰ï¼‰
    â””â”€â”€ index.ts
```

### å‘½åçº¦å®š

- **ç»„ä»¶**ï¼šPascalCaseï¼ˆå¦‚ `Card.tsx`ï¼‰
- **å·¥å…·å‡½æ•°**ï¼šcamelCaseï¼ˆå¦‚ `formatDate.ts`ï¼‰
- **Server Actions**ï¼šcamelCaseï¼ˆå¦‚ `generateCard.ts`ï¼‰
- **ç±»å‹å®šä¹‰**ï¼šPascalCaseï¼ˆå¦‚ `Card.ts`ï¼‰

## ğŸš€ å½“å‰é¡¹ç›®çš„æ‰§è¡Œæµç¨‹

```
ç”¨æˆ·è®¿é—®é¦–é¡µ
  â†“
Next.js åŠ è½½ app/layout.tsxï¼ˆæ ¹å¸ƒå±€ï¼‰
  â†“
Next.js åŠ è½½ app/page.tsxï¼ˆé¦–é¡µç»„ä»¶ï¼‰
  â†“
æµè§ˆå™¨æ¸²æŸ“é¡µé¢
  â†“
ç”¨æˆ·è¾“å…¥æ–‡æœ¬å¹¶ç‚¹å‡»æŒ‰é’®
  â†“
è°ƒç”¨ app/actions.ts ä¸­çš„ generateCardContent()
  â†“
Next.js è‡ªåŠ¨å°†è°ƒç”¨è½¬æ¢ä¸º HTTP POST
  â†“
æœåŠ¡å™¨æ‰§è¡Œ Server Action
  â†“
è°ƒç”¨ DeepSeek API
  â†“
è§£æå’ŒéªŒè¯æ•°æ®ï¼ˆä½¿ç”¨ lib/schemas.tsï¼‰
  â†“
è¿”å›ç»“æœç»™å‰ç«¯
  â†“
å‰ç«¯æ›´æ–°çŠ¶æ€å¹¶é‡æ–°æ¸²æŸ“
```

